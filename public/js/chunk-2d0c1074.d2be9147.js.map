{"version":3,"sources":["webpack:///./src/views/Password.vue","webpack:///./src/views/Password.vue?a727"],"names":["class","for","type","title","onSubmit","oError","id","placeholder","oldPassword","nError","newPassword","setup","store","handleSubmit","isSubmitting","resetForm","PASSWORD_MIN_LENGTH","submitCount","trim","required","min","value","errorMessage","oBlur","handleBlur","nBlur","values","dispatch","components","AppPage","AppLoader","__exports__","render"],"mappings":"4IAESA,MAAM,a,EACT,gCAEM,OAFDA,MAAM,QAAM,CACf,gCAAgD,MAA5CA,MAAM,oBAAmB,oB,MAE1BA,MAAM,W,GACJA,MAAM,O,GAEFA,MAAM,Q,EACT,gCAAkE,SAA3DC,IAAI,cAAcD,MAAM,cAAa,kBAAc,G,SAQrDA,MAAM,yB,GAIRA,MAAM,Q,EACT,gCAAgE,SAAzDC,IAAI,cAAcD,MAAM,cAAa,gBAAY,G,SAQnDA,MAAM,yB,EAKb,gCAES,UAFDE,KAAK,SAASF,MAAM,wBAAuB,eAEnD,G,wGArCV,yBA0CW,GA1CDG,MAAM,kBAAgB,C,8BAC9B,iBAwCM,CAxCN,gCAwCM,MAxCN,EAwCM,CAvCJ,EAGA,gCAmCM,MAnCN,EAmCM,CAlCJ,gCAiCM,MAjCN,EAiCM,CAhCJ,gCA+BO,QA/BA,SAAM,0DAAU,EAAAC,UAAA,EAAAA,SAAA,qBAAQ,e,CAC7B,gCAYM,MAZN,EAYM,CAXJ,E,4BACA,gCAME,SALAF,KAAK,WACJF,MAAK,0DAAmC,EAAAK,UACzCC,GAAG,cACHC,YAAY,6B,qDACH,EAAAC,YAAW,K,0BAAX,EAAAA,eAE8B,EAAAH,Q,yBAAzC,gCAEM,MAFN,EAEM,6BADD,EAAAA,QAAM,I,yCAGb,gCAYM,MAZN,EAYM,CAXJ,E,4BACA,gCAME,SALAH,KAAK,WACJF,MAAK,0DAAmC,EAAAS,UACzCH,GAAG,cACHC,YAAY,2B,qDACH,EAAAG,YAAW,K,0BAAX,EAAAA,eAE8B,EAAAD,Q,yBAAzC,gCAEM,MAFN,EAEM,6BADD,EAAAA,QAAM,I,yCAIb,G,sHAkBG,GACbE,MADa,WAGX,IAAMC,EAAQ,iBAEd,EAA+D,iBAAvDC,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,aAAcC,EAApC,EAAoCA,UAE9BC,GAFN,EAA+CC,YAEnB,GAE5B,EAII,eACF,cACA,SAEGC,OACAC,SAAS,8BACTC,IACCJ,EALJ,sCAMmCA,EANnC,eALOR,EADT,EACEa,MACchB,EAFhB,EAEEiB,aACYC,EAHd,EAGEC,WAYF,EAII,eACF,cACA,SAEGN,OACAC,SAAS,8BACTC,IACCJ,EALJ,sCAMmCA,EANnC,eALON,EADT,EACEW,MACcZ,EAFhB,EAEEa,aACYG,EAHd,EAGED,WAwBIpB,EAAWS,EAAY,yDAAC,WAAOa,GAAP,0GAEpBd,EAAMe,SAAS,sBAAuBD,GAFlB,OAK1BX,IAL0B,0GAAD,uDAS7B,MAAO,CACLP,cACAE,cACAL,SACAI,SACAc,QACAE,QACArB,WACAU,iBAIJc,WAAY,CAAEC,UAAA,KAASC,YAAA,O,qBCzHzB,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d0c1074.d2be9147.js","sourcesContent":["<template>\r\n  <app-page title=\"Сменить пароль\">\r\n    <div class=\"container\">\r\n      <div class=\"py-4\">\r\n        <h4 class=\"text-center mb-4\">Сменить пароль</h4>\r\n      </div>\r\n      <div class=\"profile\">\r\n        <div class=\"row\">\r\n          <form @submit.prevent=\"onSubmit\">\r\n            <div class=\"mb-3\">\r\n              <label for=\"oldPassword\" class=\"form-label\">Текущий пароль</label>\r\n              <input\r\n                type=\"password\"\r\n                :class=\"['form-control', { 'is-invalid': oError }]\"\r\n                id=\"oldPassword\"\r\n                placeholder=\"Введите ваш текущий пароль\"\r\n                v-model=\"oldPassword\"\r\n              />\r\n              <div class=\"form-text text-danger\" v-if=\"oError\">\r\n                {{ oError }}\r\n              </div>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <label for=\"newPassword\" class=\"form-label\">Новый пароль</label>\r\n              <input\r\n                type=\"password\"\r\n                :class=\"['form-control', { 'is-invalid': nError }]\"\r\n                id=\"newPassword\"\r\n                placeholder=\"Введите ваш новый пароль\"\r\n                v-model=\"newPassword\"\r\n              />\r\n              <div class=\"form-text text-danger\" v-if=\"nError\">\r\n                {{ nError }}\r\n              </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-primary mt-3\">\r\n              Сохранить\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </app-page>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, ref, computed, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useField, useForm } from \"vee-validate\";\r\nimport * as yup from \"yup\";\r\nimport AppPage from \"../components/ui/AppPage\";\r\nimport AppLoader from \"../components/ui/AppLoader.vue\";\r\n\r\nexport default {\r\n  setup() {\r\n    //store\r\n    const store = useStore();\r\n\r\n    const { handleSubmit, isSubmitting, resetForm, submitCount } = useForm();\r\n\r\n    const PASSWORD_MIN_LENGTH = 6;\r\n\r\n    const {\r\n      value: oldPassword,\r\n      errorMessage: oError,\r\n      handleBlur: oBlur,\r\n    } = useField(\r\n      \"oldPassword\",\r\n      yup\r\n        .string()\r\n        .trim()\r\n        .required(\"Пожалуйста, введите пароль\")\r\n        .min(\r\n          PASSWORD_MIN_LENGTH,\r\n          `Пароль не может быть меньше ${PASSWORD_MIN_LENGTH} символов`\r\n        )\r\n    );\r\n    const {\r\n      value: newPassword,\r\n      errorMessage: nError,\r\n      handleBlur: nBlur,\r\n    } = useField(\r\n      \"newPassword\",\r\n      yup\r\n        .string()\r\n        .trim()\r\n        .required(\"Пожалуйста, введите пароль\")\r\n        .min(\r\n          PASSWORD_MIN_LENGTH,\r\n          `Пароль не может быть меньше ${PASSWORD_MIN_LENGTH} символов`\r\n        )\r\n    );\r\n\r\n    // количество кликов подряд по кнопке входа\r\n    // const isTooManyAttempts = computed(() => submitCount.value >= 3);\r\n\r\n    // разблокировать кнопку входу через время\r\n    // watch(isTooManyAttempts, (val) => {\r\n    //   if (val) {\r\n    //     setTimeout(() => (submitCount.value = 0), 1500);\r\n    //   }\r\n    // });\r\n\r\n    // функция обновления профиля\r\n    const onSubmit = handleSubmit(async (values) => {\r\n      try {\r\n        await store.dispatch(\"auth/updatePassword\", values);\r\n\r\n        // очистка полей после успешной регистрации\r\n        resetForm();\r\n      } catch (e) {}\r\n    });\r\n\r\n    return {\r\n      oldPassword,\r\n      newPassword,\r\n      oError,\r\n      nError,\r\n      oBlur,\r\n      nBlur,\r\n      onSubmit,\r\n      isSubmitting,\r\n      // isTooManyAttempts,\r\n    };\r\n  },\r\n  components: { AppPage, AppLoader },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./Password.vue?vue&type=template&id=044a7df8\"\nimport script from \"./Password.vue?vue&type=script&lang=js\"\nexport * from \"./Password.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\_web-prog\\\\JavaScript\\\\_projects\\\\certificate\\\\client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}