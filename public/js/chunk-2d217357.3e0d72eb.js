(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217357"],{c66d:function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),a={class:"container"},c=Object(n["createElementVNode"])("div",{class:"py-4"},[Object(n["createElementVNode"])("h4",{class:"text-center mb-4"},"Мой профиль")],-1),l={key:1,class:"profile"},o={class:"row justify-content-center"},i={class:"col-md-6"},s={class:"mb-3"},u=Object(n["createElementVNode"])("label",{for:"inputEmail",class:"form-label"},"Email",-1),b={key:0,class:"form-text text-danger"},m={class:"mb-3"},d=Object(n["createElementVNode"])("label",{for:"inputName",class:"form-label"},"Имя",-1),p={key:0,class:"form-text text-danger"},j={class:"mb-3"},O=Object(n["createTextVNode"])(" Уровень доступа: "),v={class:"mb-3"},f=Object(n["createTextVNode"])("Сменить пароль"),E=Object(n["createElementVNode"])("button",{type:"submit",class:"btn btn-primary mt-3"}," Сохранить ",-1);function g(e,t,r,g,k,h){var N=Object(n["resolveComponent"])("app-loader"),V=Object(n["resolveComponent"])("router-link"),w=Object(n["resolveComponent"])("app-page");return Object(n["openBlock"])(),Object(n["createBlock"])(w,{title:"Мой профиль"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",a,[c,g.loading?(Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:0})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(n["withModifiers"])((function(){return g.onSubmit&&g.onSubmit.apply(g,arguments)}),["prevent"]))},[Object(n["createElementVNode"])("div",s,[u,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"email",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":g.eError}]),id:"inputEmail","onUpdate:modelValue":t[0]||(t[0]=function(e){return g.email=e})},null,2),[[n["vModelText"],g.email]]),g.eError?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,Object(n["toDisplayString"])(g.eError),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",m,[d,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":g.nError}]),id:"inputName","onUpdate:modelValue":t[1]||(t[1]=function(e){return g.name=e})},null,2),[[n["vModelText"],g.name]]),g.nError?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",p,Object(n["toDisplayString"])(g.nError),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",j,[O,(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(g.roles,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:t,class:Object(n["normalizeClass"])(["badge","fw-normal",{"bg-danger":"admin"==e},{"bg-primary":"user"==e},{"bg-warning":"god"==e}])},Object(n["toDisplayString"])("admin"==e?"Администратор":"user"==e?"Пользователь":"god"==e?"God":""),3)})),128))]),Object(n["createElementVNode"])("div",v,[Object(n["createVNode"])(V,{to:"/password"},{default:Object(n["withCtx"])((function(){return[f]})),_:1})]),E],32)])])]))])]})),_:1})}var k=r("1da1"),h=(r("96cf"),r("498a"),r("5502")),N=r("7bb1"),V=r("506a"),w=r("1da6"),x=r("ddc6"),B={setup:function(){var e=Object(h["b"])(),t=Object(n["ref"])(!1),r=Object(n["ref"])(null),a=Object(n["ref"])(null),c=Object(n["ref"])(null),l=Object(N["b"])(),o=l.handleSubmit,i=l.isSubmitting,s=(l.submitCount,Object(N["a"])("email",V["c"]().trim().required("Пожалуйста, введите email").email("Необходимо ввести корректный email"))),u=s.value,b=s.errorMessage,m=s.handleBlur,d=Object(N["a"])("name",V["c"]().trim().required("Пожалуйста, введите имя").min(5,"Имя не может быть меньше 5 символов")),p=d.value,j=d.errorMessage,O=d.handleBlur;Object(n["onMounted"])(Object(k["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.value=!0,a.value=e.getters["auth/user"].id,a.value){n.next=6;break}return n.next=5,e.dispatch("auth/loadCurrentUserId");case 5:a.value=n.sent;case 6:return n.next=8,e.dispatch("auth/loadUserById",a.value);case 8:r.value=n.sent,u.value=r.value.email,p.value=r.value.name,c.value=r.value.roles,t.value=!1;case 13:case"end":return n.stop()}}),n)}))));var v=o(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.dispatch("auth/update",r);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t["catch"](0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}());return{user:r,loading:t,email:u,name:p,eError:b,nError:j,eBlur:m,nBlur:O,roles:c,onSubmit:v,isSubmitting:i}},components:{AppPage:w["a"],AppLoader:x["a"]}},y=r("6b0d"),C=r.n(y);const S=C()(B,[["render",g]]);t["default"]=S}}]);
//# sourceMappingURL=chunk-2d217357.3e0d72eb.js.map