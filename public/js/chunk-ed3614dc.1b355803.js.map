{"version":3,"sources":["webpack:///./src/views/Auth.vue","webpack:///./src/use/login-form.js","webpack:///./src/components/ui/AppSystemPage.vue","webpack:///./src/components/ui/AppSystemPage.vue?c61e","webpack:///./src/views/Auth.vue?eea7","webpack:///./src/assets/img/logo-200.png"],"names":["class","src","alt","for","type","title","onLoginSubmit","lEmailError","id","aria-describedby","placeholder","loginEmail","lPasswordError","loginPassword","useLoginForm","store","useStore","router","useRouter","useForm","handleSubmit","isSubmitting","submitCount","useField","yup","trim","required","email","value","errorMessage","lEmailBlur","handleBlur","PASSWORD_MIN_LENGTH","min","lPasswordBlur","values","dispatch","push","props","String","setup","document","__exports__","route","localStorageToken","localStorage","getItem","query","message","error","components","AppSystemPage","render","module","exports"],"mappings":"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","file":"js/chunk-ed3614dc.1b355803.js","sourcesContent":["<template>\r\n  <app-system-page title=\"Авторизация\">\r\n    <div class=\"auth mx-auto\">\r\n      <img\r\n        class=\"mx-auto d-block mb-5\"\r\n        src=\"../assets/img/logo-200.png\"\r\n        alt=\"\"\r\n      />\r\n      <div class=\"auth-card p-3 card\">\r\n        <form @submit.prevent=\"onLoginSubmit\">\r\n          <div class=\"mb-3\">\r\n            <div class=\"form-floating mb-1\">\r\n              <input\r\n                type=\"email\"\r\n                :class=\"['form-control', { 'is-invalid': lEmailError }]\"\r\n                id=\"loginEmail\"\r\n                aria-describedby=\"emailHelp\"\r\n                placeholder=\"name@example.com\"\r\n                v-model=\"loginEmail\"\r\n              />\r\n              <label for=\"loginEmail\" class=\"form-label\">Email</label>\r\n            </div>\r\n            <div class=\"form-text text-danger mb-3\" v-if=\"lEmailError\">\r\n              {{ lEmailError }}\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"mb-3\">\r\n            <div class=\"form-floating mb-1\">\r\n              <input\r\n                type=\"password\"\r\n                :class=\"['form-control', { 'is-invalid': lPasswordError }]\"\r\n                id=\"loginPassword\"\r\n                placeholder=\"Пароль\"\r\n                v-model=\"loginPassword\"\r\n              />\r\n              <label for=\"loginPassword\" class=\"form-label\">Пароль</label>\r\n            </div>\r\n            <div class=\"form-text text-danger mb-3\" v-if=\"lPasswordError\">\r\n              {{ lPasswordError }}\r\n            </div>\r\n          </div>\r\n\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n            Войти\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </app-system-page>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted } from \"vue\";\r\nimport { useLoginForm } from \"../use/login-form\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport { error } from \"../utils/error\";\r\nimport router from \"../router\";\r\nimport AppSystemPage from \"../components/ui/AppSystemPage\";\r\n\r\nexport default {\r\n  setup() {\r\n    const route = useRoute();\r\n    const store = useStore();\r\n\r\n    onMounted(() => {\r\n      const localStorageToken = localStorage.getItem(\"token\");\r\n\r\n      if (localStorageToken) {\r\n        router.push(\"/\");\r\n      }\r\n    });\r\n\r\n    if (route.query.message) {\r\n      store.dispatch(\"setMessage\", {\r\n        value: error(route.query.message),\r\n        type: \"warning\",\r\n      });\r\n    }\r\n\r\n    return { ...useLoginForm() };\r\n  },\r\n  components: { AppSystemPage },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { useField, useForm } from \"vee-validate\";\r\nimport * as yup from \"yup\";\r\nimport { computed, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport function useLoginForm() {\r\n  const store = useStore();\r\n  const router = useRouter();\r\n  const { handleSubmit, isSubmitting, submitCount } = useForm();\r\n\r\n  const {\r\n    value: loginEmail,\r\n    errorMessage: lEmailError,\r\n    handleBlur: lEmailBlur,\r\n  } = useField(\r\n    \"loginEmail\",\r\n    yup\r\n      .string()\r\n      .trim()\r\n      .required(\"Пожалуйста, введите email\")\r\n      .email(\"Необходимо ввести корректный email\")\r\n  );\r\n\r\n  const PASSWORD_MIN_LENGTH = 6;\r\n\r\n  const {\r\n    value: loginPassword,\r\n    errorMessage: lPasswordError,\r\n    handleBlur: lPasswordBlur,\r\n  } = useField(\r\n    \"loginPassword\",\r\n    yup\r\n      .string()\r\n      .trim()\r\n      .required(\"Пожалуйста, введите пароль\")\r\n      .min(\r\n        PASSWORD_MIN_LENGTH,\r\n        `Пароль не может быть меньше ${PASSWORD_MIN_LENGTH} символов`\r\n      )\r\n  );\r\n\r\n  // количество кликов подряд по кнопке входа\r\n  // const isTooManyAttempts = computed(() => submitCount.value >= 3);\r\n\r\n  // разблокировать кнопку входу через время\r\n  // watch(isTooManyAttempts, (val) => {\r\n  //   if (val) {\r\n  //     setTimeout(() => (submitCount.value = 0), 30000);\r\n  //   }\r\n  // });\r\n\r\n  const onLoginSubmit = handleSubmit(async (values) => {\r\n    // console.log(\"isTooManyAttempts\", isTooManyAttempts);\r\n    try {\r\n      // console.log(\"login-form.js --> onLoginSubmit() \");\r\n      await store.dispatch(\"auth/login\", values);\r\n\r\n      router.push(\"/\");\r\n    } catch (e) {}\r\n  });\r\n\r\n  return {\r\n    loginEmail,\r\n    loginPassword,\r\n    lEmailError,\r\n    lPasswordError,\r\n    lEmailBlur,\r\n    lPasswordBlur,\r\n    onLoginSubmit,\r\n    isSubmitting,\r\n    // isTooManyAttempts,\r\n  };\r\n}\r\n","<template>\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <slot />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  setup(props) {\r\n    document.title = `${props.title} | Университетские технологии`;\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./AppSystemPage.vue?vue&type=template&id=cd11dd70\"\nimport script from \"./AppSystemPage.vue?vue&type=script&lang=js\"\nexport * from \"./AppSystemPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\_web-prog\\\\JavaScript\\\\_projects\\\\certificate\\\\client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Auth.vue?vue&type=template&id=152819ce\"\nimport script from \"./Auth.vue?vue&type=script&lang=js\"\nexport * from \"./Auth.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\_web-prog\\\\JavaScript\\\\_projects\\\\certificate\\\\client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"img/logo-200.0221cb80.png\";"],"sourceRoot":""}